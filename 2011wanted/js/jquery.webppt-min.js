(function(a){var b={};b.model=function(c,d){this.opts=d||{};this.View={$layout:c};this.init()};b.model.prototype={init:function(){this.isAnimating=false;this.initView();this.bindEvts()},initView:function(){var c=this;this.View.$frames=this.View.$layout.find(this.opts.css_frame);this.View.$navs=a(this.opts.css_frame_nav).children();this.View.$current=this.View.$frames.eq(0);this.View.$frames.each(function(d,g){g=a(g);var f=g.find("."+c.opts.cl_entry),e="";if(f.length>0){g.data("entrys",f);e='<div class="'+c.opts.cl_entry_nav+'">';f.each(function(){e+='<a href="#"></a>'});e+="</div>";g.append(e).find("."+c.opts.cl_entry_nav+" a").click(function(i){var h=a(this);if(h.hasClass("on")){c.hideEntry(h.removeClass("on").index(),g)}else{c.showEntry(h.addClass("on").index(),g)}return false})}})},showEntry:function(c,d){d.data("entrys").eq(c).fadeIn()},hideEntry:function(c,d){d.data("entrys").eq(c).fadeOut()},bindEvts:function(){var c=this;a(document).keydown(function(f){if(c.isAnimating){return}var d=0;if(f==null){d=event.keyCode}else{d=f.which}switch(d){case 37:c.toPrev();break;case 38:c.toPrev();break;case 39:c.toNext();break;case 40:c.toNext();break;case 13:break}});this.View.$navs.click(function(h){var f=c.currentIdx(),g=a(this),d=g.index();if((d==f)||(c.isAnimating)){return false}if(d<f){c.animateTo(c.View.$frames.eq(d),true)}else{c.animateTo(c.View.$frames.eq(d),false)}c.activeNav(d);return false})},activeNav:function(c){this.View.$navs.removeClass("on").eq(c).addClass("on");a("body").removeClass().addClass("frame-view-"+c)},currentIdx:function(){return this.View.$current.index()},animateTo:function(g,e){var f=this,c="slide in"+(e?" reverse":""),d="slide out"+(e?" reverse":"");this.isAnimating=true;if(f.opts.onPreNav){f.opts.onPreNav.call(this)}g.addClass(this.opts.cl_active+" "+c).animationComplete(function(h){g.removeClass(c)});this.View.$current.addClass(d).animationComplete(function(h){f.isAnimating=false;f.View.$current.removeClass(f.opts.cl_active+" "+d);f.View.$current=g;f.activeNav(f.currentIdx())})},toPrev:function(){var c=this.View.$current.prev();if(c.length==0){return}this.animateTo(c,true)},toNext:function(){var d=this.View.$current.next(),c=this;if(d.length==0||(!d.hasClass("wdg-frame"))){return}this.animateTo(d,false)}};a.fn.WebPPT=function(c){c=a.extend({},a.fn.WebPPT.defaults,c);return this.each(function(){new b.model(a(this),c)})};a.fn.WebPPT.defaults={css_frame:".wdg-frame",css_frame_nav:".wdg-frame-nav",cl_entry:"wdg-entry",cl_entry_nav:"wdg-entry-nav",cl_active:"frame-on"};a.extend(a.support,{orientation:"orientation" in window,touch:"ontouchend" in document,cssTransitions:"WebKitTransitionEvent" in window,eventCapture:"addEventListener" in document});a.fn.animationComplete=function(c){if(a.support.cssTransitions){return a(this).one("webkitAnimationEnd",c)}else{setTimeout(c,0);return a(this)}}})(jQuery);